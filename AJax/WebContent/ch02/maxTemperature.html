<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
최근 4일간  최고기온 : <span id="maxtemp"></span>
</body>

<script type="text/javascript">
window.onload = function() {
	loadList();
}

var xhr = null;
function loadList() {
	xhr = new XMLHttpRequest();
	xhr.onreadystatechange = loadedList;
	xhr.open("GET", "getMaxTemperature.jsp", true);
	xhr.send(null);
}

function loadedList() {
	if(xhr.readyState == 4) {
		if(xhr.status == 200) {
			var csvStr = xhr.responseText;	// "10.2, 11.8, 12.9, 9.0"
			var temperatureStrs = csvStr.split(",");	//"10.2" "11.8" "12.9" "9.0"
			
			var temperatures = new Array(temperatureStrs.length);	// 배열 생성
			for(var i=0; i<temperatureStrs.length; i++) {
				temperatures[i] = parseFloat(temperatureStrs[i]);	// 실수로 타입변환해서 배열에 저장
			}
			
			var max = temperatures[0];
			for(var i=1; i<temperatures.length; i++) {
				if(max < temperatures[i]) {
					max = temperatures[i];
				}
			}
			
			var maxtemp = document.getElementById("maxtemp");
			maxtemp.innerHTML = "<strong>" + max +"</strong>";
		}
	}
}
</script>
</html>